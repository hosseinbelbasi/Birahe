FROM mcr.microsoft.com/dotnet/sdk:8.0

WORKDIR /app

# Development environment
ENV ASPNETCORE_ENVIRONMENT=Development

# Install dotnet-watch for hot reload
RUN dotnet tool install -g dotnet-watch
ENV PATH="$PATH:/root/.dotnet/tools"

# Copy csproj and restore (cache optimization)
COPY *.csproj ./
RUN dotnet restore

# Copy the rest of the code
COPY . .

# Expose port for dev
EXPOSE 5000

# Run with hot reload
CMD ["dotnet", "watch", "run", "--urls=http://0.0.0.0:5000"]
